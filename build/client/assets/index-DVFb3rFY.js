import{r as c,a as z,j as v}from"./index-D0EyjebO.js";import{R as Je,a as En,c as Nn,u as _e}from"./index-BOePO-Vi.js";import{r as Mn,a as Gt,l as Jt,t as In,u as Tn,b as An}from"./formSlice-DwJQCDQr.js";import{a as Ae}from"./index-CnCQLWBH.js";function _t(e=Je){const t=e===Je?En:Nn(e);return function(){const{store:r}=t();return r}}const On=_t();function Ln(e=Je){const t=e===Je?On:_t(e);return function(){return t().dispatch}}const bt=Ln();function kn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const nt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function we(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function mt(e){return"nodeType"in e}function P(e){var t,n;return e?we(e)?e:mt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function xt(e){const{Document:t}=P(e);return e instanceof t}function Pe(e){return we(e)?!1:e instanceof P(e).HTMLElement}function Qt(e){return e instanceof P(e).SVGElement}function ye(e){return e?we(e)?e.document:mt(e)?xt(e)?e:Pe(e)||Qt(e)?e.ownerDocument:document:document:document}const Z=nt?c.useLayoutEffect:c.useEffect;function wt(e){const t=c.useRef(e);return Z(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function jn(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function je(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Z(()=>{n.current!==e&&(n.current=e)},t),n}function Be(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Qe(e){const t=wt(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function ft(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let lt={};function $e(e,t){return c.useMemo(()=>{if(t)return t;const n=lt[e]==null?0:lt[e]+1;return lt[e]=n,e+"-"+n},[e,t])}function Zt(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((i,s)=>{const l=Object.entries(s);for(const[u,a]of l){const d=i[u];d!=null&&(i[u]=d+e*a)}return i},{...t})}}const xe=Zt(1),Ze=Zt(-1);function Fn(e){return"clientX"in e&&"clientY"in e}function yt(e){if(!e)return!1;const{KeyboardEvent:t}=P(e.target);return t&&e instanceof t}function zn(e){if(!e)return!1;const{TouchEvent:t}=P(e.target);return t&&e instanceof t}function ht(e){if(zn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Fn(e)?{x:e.clientX,y:e.clientY}:null}const Fe=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Fe.Translate.toString(e),Fe.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Ft="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Pn(e){return e.matches(Ft)?e:e.querySelector(Ft)}const Bn={display:"none"};function $n(e){let{id:t,value:n}=e;return z.createElement("div",{id:t,style:Bn},n)}function Un(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return z.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function qn(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const en=c.createContext(null);function Xn(e){const t=c.useContext(en);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Yn(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:i}=r;e.forEach(s=>{var l;return(l=s[o])==null?void 0:l.call(s,i)})},[e]),t]}const Wn={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Hn={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Vn(e){let{announcements:t=Hn,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Wn}=e;const{announce:i,announcement:s}=qn(),l=$e("DndLiveRegion"),[u,a]=c.useState(!1);if(c.useEffect(()=>{a(!0)},[]),Xn(c.useMemo(()=>({onDragStart(f){let{active:g}=f;i(t.onDragStart({active:g}))},onDragMove(f){let{active:g,over:h}=f;t.onDragMove&&i(t.onDragMove({active:g,over:h}))},onDragOver(f){let{active:g,over:h}=f;i(t.onDragOver({active:g,over:h}))},onDragEnd(f){let{active:g,over:h}=f;i(t.onDragEnd({active:g,over:h}))},onDragCancel(f){let{active:g,over:h}=f;i(t.onDragCancel({active:g,over:h}))}}),[i,t])),!u)return null;const d=z.createElement(z.Fragment,null,z.createElement($n,{id:r,value:o.draggable}),z.createElement(Un,{id:l,announcement:s}));return n?Ae.createPortal(d,n):d}var A;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(A||(A={}));function et(){}function zt(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Kn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const K=Object.freeze({x:0,y:0});function Gn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Jn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function _n(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Qn(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Pt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Zn=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Pt(t,t.left,t.top),i=[];for(const s of r){const{id:l}=s,u=n.get(l);if(u){const a=Gn(Pt(u),o);i.push({id:l,data:{droppableContainer:s,value:a}})}}return i.sort(Jn)};function er(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=o-r,l=i-n;if(r<o&&n<i){const u=t.width*t.height,a=e.width*e.height,d=s*l,f=d/(u+a-d);return Number(f.toFixed(4))}return 0}const tr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const i of r){const{id:s}=i,l=n.get(s);if(l){const u=er(l,t);u>0&&o.push({id:s,data:{droppableContainer:i,value:u}})}}return o.sort(_n)};function nr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function tn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:K}function rr(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.reduce((s,l)=>({...s,top:s.top+e*l.y,bottom:s.bottom+e*l.y,left:s.left+e*l.x,right:s.right+e*l.x}),{...n})}}const or=rr(1);function ir(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function sr(e,t,n){const r=ir(t);if(!r)return e;const{scaleX:o,scaleY:i,x:s,y:l}=r,u=e.left-s-(1-o)*parseFloat(n),a=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:a,right:u+d,bottom:a+f,left:u}}const ar={ignoreTransform:!1};function De(e,t){t===void 0&&(t=ar);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:a,transformOrigin:d}=P(e).getComputedStyle(e);a&&(n=sr(n,a,d))}const{top:r,left:o,width:i,height:s,bottom:l,right:u}=n;return{top:r,left:o,width:i,height:s,bottom:l,right:u}}function Bt(e){return De(e,{ignoreTransform:!0})}function lr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function cr(e,t){return t===void 0&&(t=P(e).getComputedStyle(e)),t.position==="fixed"}function ur(e,t){t===void 0&&(t=P(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=t[o];return typeof i=="string"?n.test(i):!1})}function Dt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(xt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Pe(o)||Qt(o)||n.includes(o))return n;const i=P(e).getComputedStyle(o);return o!==e&&ur(o,i)&&n.push(o),cr(o,i)?n:r(o.parentNode)}return e?r(e):n}function nn(e){const[t]=Dt(e,1);return t??null}function ct(e){return!nt||!e?null:we(e)?e:mt(e)?xt(e)||e===ye(e).scrollingElement?window:Pe(e)?e:null:null}function rn(e){return we(e)?e.scrollX:e.scrollLeft}function on(e){return we(e)?e.scrollY:e.scrollTop}function gt(e){return{x:rn(e),y:on(e)}}var L;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(L||(L={}));function sn(e){return!nt||!e?!1:e===document.scrollingElement}function an(e){const t={x:0,y:0},n=sn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:i,isBottom:s,isRight:l,maxScroll:r,minScroll:t}}const dr={x:.2,y:.2};function fr(e,t,n,r,o){let{top:i,left:s,right:l,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=dr);const{isTop:a,isBottom:d,isLeft:f,isRight:g}=an(e),h={x:0,y:0},S={x:0,y:0},p={height:t.height*o.y,width:t.width*o.x};return!a&&i<=t.top+p.height?(h.y=L.Backward,S.y=r*Math.abs((t.top+p.height-i)/p.height)):!d&&u>=t.bottom-p.height&&(h.y=L.Forward,S.y=r*Math.abs((t.bottom-p.height-u)/p.height)),!g&&l>=t.right-p.width?(h.x=L.Forward,S.x=r*Math.abs((t.right-p.width-l)/p.width)):!f&&s<=t.left+p.width&&(h.x=L.Backward,S.x=r*Math.abs((t.left+p.width-s)/p.width)),{direction:h,speed:S}}function hr(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function ln(e){return e.reduce((t,n)=>xe(t,gt(n)),K)}function gr(e){return e.reduce((t,n)=>t+rn(n),0)}function pr(e){return e.reduce((t,n)=>t+on(n),0)}function vr(e,t){if(t===void 0&&(t=De),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);nn(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const br=[["x",["left","right"],gr],["y",["top","bottom"],pr]];class Ct{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Dt(n),o=ln(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,l]of br)for(const u of s)Object.defineProperty(this,u,{get:()=>{const a=l(r),d=o[i]-a;return this.rect[u]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Oe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function mr(e){const{EventTarget:t}=P(e);return e instanceof t?e:ye(e)}function ut(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var W;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(W||(W={}));function $t(e){e.preventDefault()}function xr(e){e.stopPropagation()}var C;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(C||(C={}));const cn={start:[C.Space,C.Enter],cancel:[C.Esc],end:[C.Space,C.Enter,C.Tab]},wr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case C.Right:return{...n,x:n.x+25};case C.Left:return{...n,x:n.x-25};case C.Down:return{...n,y:n.y+25};case C.Up:return{...n,y:n.y-25}}};class St{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Oe(ye(n)),this.windowListeners=new Oe(P(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(W.Resize,this.handleCancel),this.windowListeners.add(W.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(W.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&vr(r),n(K)}handleKeyDown(t){if(yt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:i=cn,coordinateGetter:s=wr,scrollBehavior:l="smooth"}=o,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:a}=r.current,d=a?{x:a.left,y:a.top}:K;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(t,{active:n,context:r.current,currentCoordinates:d});if(f){const g=Ze(f,d),h={x:0,y:0},{scrollableAncestors:S}=r.current;for(const p of S){const b=t.code,{isTop:w,isRight:D,isLeft:m,isBottom:R,maxScroll:E,minScroll:N}=an(p),y=hr(p),x={x:Math.min(b===C.Right?y.right-y.width/2:y.right,Math.max(b===C.Right?y.left:y.left+y.width/2,f.x)),y:Math.min(b===C.Down?y.bottom-y.height/2:y.bottom,Math.max(b===C.Down?y.top:y.top+y.height/2,f.y))},T=b===C.Right&&!D||b===C.Left&&!m,O=b===C.Down&&!R||b===C.Up&&!w;if(T&&x.x!==f.x){const I=p.scrollLeft+g.x,H=b===C.Right&&I<=E.x||b===C.Left&&I>=N.x;if(H&&!g.y){p.scrollTo({left:I,behavior:l});return}H?h.x=p.scrollLeft-I:h.x=b===C.Right?p.scrollLeft-E.x:p.scrollLeft-N.x,h.x&&p.scrollBy({left:-h.x,behavior:l});break}else if(O&&x.y!==f.y){const I=p.scrollTop+g.y,H=b===C.Down&&I<=E.y||b===C.Up&&I>=N.y;if(H&&!g.x){p.scrollTo({top:I,behavior:l});return}H?h.y=p.scrollTop-I:h.y=b===C.Down?p.scrollTop-E.y:p.scrollTop-N.y,h.y&&p.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,xe(Ze(f,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}St.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=cn,onActivation:o}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function Ut(e){return!!(e&&"distance"in e)}function qt(e){return!!(e&&"delay"in e)}class Rt{constructor(t,n,r){var o;r===void 0&&(r=mr(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=ye(s),this.documentListeners=new Oe(this.document),this.listeners=new Oe(r),this.windowListeners=new Oe(P(s)),this.initialCoordinates=(o=ht(i))!=null?o:K,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(W.Resize,this.handleCancel),this.windowListeners.add(W.DragStart,$t),this.windowListeners.add(W.VisibilityChange,this.handleCancel),this.windowListeners.add(W.ContextMenu,$t),this.documentListeners.add(W.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ut(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(W.Click,xr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(W.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:i}=this,{onMove:s,options:{activationConstraint:l}}=i;if(!o)return;const u=(n=ht(t))!=null?n:K,a=Ze(o,u);if(!r&&l){if(Ut(l)){if(l.tolerance!=null&&ut(a,l.tolerance))return this.handleCancel();if(ut(a,l.distance))return this.handleStart()}if(qt(l)&&ut(a,l.tolerance))return this.handleCancel();this.handlePending(l,a);return}t.cancelable&&t.preventDefault(),s(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===C.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const yr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Et extends Rt{constructor(t){const{event:n}=t,r=ye(n.target);super(t,yr,r)}}Et.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Dr={move:{name:"mousemove"},end:{name:"mouseup"}};var pt;(function(e){e[e.RightClick=2]="RightClick"})(pt||(pt={}));class Cr extends Rt{constructor(t){super(t,Dr,ye(t.event.target))}}Cr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===pt.RightClick?!1:(r==null||r({event:n}),!0)}}];const dt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Sr extends Rt{constructor(t){super(t,dt)}static setup(){return window.addEventListener(dt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(dt.move.name,t)};function t(){}}}Sr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Le;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Le||(Le={}));var tt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(tt||(tt={}));function Rr(e){let{acceleration:t,activator:n=Le.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:s=5,order:l=tt.TreeOrder,pointerCoordinates:u,scrollableAncestors:a,scrollableAncestorRects:d,delta:f,threshold:g}=e;const h=Nr({delta:f,disabled:!i}),[S,p]=jn(),b=c.useRef({x:0,y:0}),w=c.useRef({x:0,y:0}),D=c.useMemo(()=>{switch(n){case Le.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Le.DraggableRect:return o}},[n,o,u]),m=c.useRef(null),R=c.useCallback(()=>{const N=m.current;if(!N)return;const y=b.current.x*w.current.x,x=b.current.y*w.current.y;N.scrollBy(y,x)},[]),E=c.useMemo(()=>l===tt.TreeOrder?[...a].reverse():a,[l,a]);c.useEffect(()=>{if(!i||!a.length||!D){p();return}for(const N of E){if((r==null?void 0:r(N))===!1)continue;const y=a.indexOf(N),x=d[y];if(!x)continue;const{direction:T,speed:O}=fr(N,x,D,t,g);for(const I of["x","y"])h[I][T[I]]||(O[I]=0,T[I]=0);if(O.x>0||O.y>0){p(),m.current=N,S(R,s),b.current=O,w.current=T;return}}b.current={x:0,y:0},w.current={x:0,y:0},p()},[t,R,r,p,i,s,JSON.stringify(D),JSON.stringify(h),S,a,E,d,JSON.stringify(g)])}const Er={x:{[L.Backward]:!1,[L.Forward]:!1},y:{[L.Backward]:!1,[L.Forward]:!1}};function Nr(e){let{delta:t,disabled:n}=e;const r=ft(t);return Be(o=>{if(n||!r||!o)return Er;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[L.Backward]:o.x[L.Backward]||i.x===-1,[L.Forward]:o.x[L.Forward]||i.x===1},y:{[L.Backward]:o.y[L.Backward]||i.y===-1,[L.Forward]:o.y[L.Forward]||i.y===1}}},[n,t,r])}function Mr(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Be(o=>{var i;return t==null?null:(i=r??o)!=null?i:null},[r,t])}function Ir(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,i=o.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var ze;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ze||(ze={}));var vt;(function(e){e.Optimized="optimized"})(vt||(vt={}));const Xt=new Map;function Tr(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,s]=c.useState(null),{frequency:l,measure:u,strategy:a}=o,d=c.useRef(e),f=b(),g=je(f),h=c.useCallback(function(w){w===void 0&&(w=[]),!g.current&&s(D=>D===null?w:D.concat(w.filter(m=>!D.includes(m))))},[g]),S=c.useRef(null),p=Be(w=>{if(f&&!n)return Xt;if(!w||w===Xt||d.current!==e||i!=null){const D=new Map;for(let m of e){if(!m)continue;if(i&&i.length>0&&!i.includes(m.id)&&m.rect.current){D.set(m.id,m.rect.current);continue}const R=m.node.current,E=R?new Ct(u(R),R):null;m.rect.current=E,E&&D.set(m.id,E)}return D}return w},[e,i,n,f,u]);return c.useEffect(()=>{d.current=e},[e]),c.useEffect(()=>{f||h()},[n,f]),c.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),c.useEffect(()=>{f||typeof l!="number"||S.current!==null||(S.current=setTimeout(()=>{h(),S.current=null},l))},[l,f,h,...r]),{droppableRects:p,measureDroppableContainers:h,measuringScheduled:i!=null};function b(){switch(a){case ze.Always:return!1;case ze.BeforeDragging:return n;default:return!n}}}function un(e,t){return Be(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ar(e,t){return un(e,t)}function Or(e){let{callback:t,disabled:n}=e;const r=wt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return c.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function rt(e){let{callback:t,disabled:n}=e;const r=wt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return c.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Lr(e){return new Ct(De(e),e)}function Yt(e,t,n){t===void 0&&(t=Lr);const[r,o]=c.useState(null);function i(){o(u=>{if(!e)return null;if(e.isConnected===!1){var a;return(a=u??n)!=null?a:null}const d=t(e);return JSON.stringify(u)===JSON.stringify(d)?u:d})}const s=Or({callback(u){if(e)for(const a of u){const{type:d,target:f}=a;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=rt({callback:i});return Z(()=>{i(),e?(l==null||l.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[e]),r}function kr(e){const t=un(e);return tn(e,t)}const Wt=[];function jr(e){const t=c.useRef(e),n=Be(r=>e?r&&r!==Wt&&e&&t.current&&e.parentNode===t.current.parentNode?r:Dt(e):Wt,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Fr(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(i=>{const s=ct(i.target);s&&n(l=>l?(l.set(s,gt(s)),new Map(l)):null)},[]);return c.useEffect(()=>{const i=r.current;if(e!==i){s(i);const l=e.map(u=>{const a=ct(u);return a?(a.addEventListener("scroll",o,{passive:!0}),[a,gt(a)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{s(e),s(i)};function s(l){l.forEach(u=>{const a=ct(u);a==null||a.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>xe(i,s),K):ln(e):K,[e,t])}function Ht(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==K;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ze(e,n.current):K}function zr(e){c.useEffect(()=>{if(!nt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Pr(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:i}=r;return n[o]=s=>{i(s,t)},n},{}),[e,t])}function dn(e){return c.useMemo(()=>e?lr(e):null,[e])}const Vt=[];function Br(e,t){t===void 0&&(t=De);const[n]=e,r=dn(n?P(n):null),[o,i]=c.useState(Vt);function s(){i(()=>e.length?e.map(u=>sn(u)?r:new Ct(t(u),u)):Vt)}const l=rt({callback:s});return Z(()=>{l==null||l.disconnect(),s(),e.forEach(u=>l==null?void 0:l.observe(u))},[e]),o}function $r(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Pe(t)?t:e}function Ur(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(a=>{for(const{target:d}of a)if(Pe(d)){r(f=>{const g=t(d);return f?{...f,width:g.width,height:g.height}:g});break}},[t]),i=rt({callback:o}),s=c.useCallback(a=>{const d=$r(a);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[l,u]=Qe(s);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const qr=[{sensor:Et,options:{}},{sensor:St,options:{}}],Xr={current:{}},Ge={draggable:{measure:Bt},droppable:{measure:Bt,strategy:ze.WhileDragging,frequency:vt.Optimized},dragOverlay:{measure:De}};class ke extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Yr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ke,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:et},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ge,measureDroppableContainers:et,windowRect:null,measuringScheduled:!1},Wr={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:et,draggableNodes:new Map,over:null,measureDroppableContainers:et},ot=c.createContext(Wr),fn=c.createContext(Yr);function Hr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ke}}}function Vr(e,t){switch(t.type){case A.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case A.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case A.DragEnd:case A.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case A.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new ke(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case A.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new ke(e.droppable.containers);return s.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:s}}}case A.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new ke(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Kr(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(ot),i=ft(r),s=ft(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!yt(i)||document.activeElement===i.target)return;const l=o.get(s);if(!l)return;const{activatorNode:u,node:a}=l;if(!u.current&&!a.current)return;requestAnimationFrame(()=>{for(const d of[u.current,a.current]){if(!d)continue;const f=Pn(d);if(f){f.focus();break}}})}},[r,t,o,s,i]),null}function Gr(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...r}),n):n}function Jr(e){return c.useMemo(()=>({draggable:{...Ge.draggable,...e==null?void 0:e.draggable},droppable:{...Ge.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ge.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function _r(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=c.useRef(!1),{x:s,y:l}=typeof o=="boolean"?{x:o,y:o}:o;Z(()=>{if(!s&&!l||!t){i.current=!1;return}if(i.current||!r)return;const a=t==null?void 0:t.node.current;if(!a||a.isConnected===!1)return;const d=n(a),f=tn(d,r);if(s||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const g=nn(a);g&&g.scrollBy({top:f.y,left:f.x})}},[t,s,l,r,n])}const hn=c.createContext({...K,scaleX:1,scaleY:1});var de;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(de||(de={}));const Qr=c.memo(function(t){var n,r,o,i;let{id:s,accessibility:l,autoScroll:u=!0,children:a,sensors:d=qr,collisionDetection:f=tr,measuring:g,modifiers:h,...S}=t;const p=c.useReducer(Vr,void 0,Hr),[b,w]=p,[D,m]=Yn(),[R,E]=c.useState(de.Uninitialized),N=R===de.Initialized,{draggable:{active:y,nodes:x,translate:T},droppable:{containers:O}}=b,I=y!=null?x.get(y):null,H=c.useRef({initial:null,translated:null}),V=c.useMemo(()=>{var j;return y!=null?{id:y,data:(j=I==null?void 0:I.data)!=null?j:Xr,rect:H}:null},[y,I]),G=c.useRef(null),[Ce,Ue]=c.useState(null),[B,qe]=c.useState(null),ee=je(S,Object.values(S)),Se=$e("DndDescribedBy",s),Xe=c.useMemo(()=>O.getEnabled(),[O]),F=Jr(g),{droppableRects:te,measureDroppableContainers:fe,measuringScheduled:Re}=Tr(Xe,{dragging:N,dependencies:[T.x,T.y],config:F.droppable}),X=Mr(x,y),Ye=c.useMemo(()=>B?ht(B):null,[B]),ie=Rn(),ne=Ar(X,F.draggable.measure);_r({activeNode:y!=null?x.get(y):null,config:ie.layoutShiftCompensation,initialRect:ne,measure:F.draggable.measure});const M=Yt(X,F.draggable.measure,ne),Ee=Yt(X?X.parentElement:null),J=c.useRef({activatorEvent:null,active:null,activeNode:X,collisionRect:null,collisions:null,droppableRects:te,draggableNodes:x,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),he=O.getNodeFor((n=J.current.over)==null?void 0:n.id),re=Ur({measure:F.dragOverlay.measure}),ge=(r=re.nodeRef.current)!=null?r:X,pe=N?(o=re.rect)!=null?o:M:null,Mt=!!(re.nodeRef.current&&re.rect),It=kr(Mt?null:M),it=dn(ge?P(ge):null),se=jr(N?he??X:null),We=Br(se),He=Gr(h,{transform:{x:T.x-It.x,y:T.y-It.y,scaleX:1,scaleY:1},activatorEvent:B,active:V,activeNodeRect:M,containerNodeRect:Ee,draggingNodeRect:pe,over:J.current.over,overlayNodeRect:re.rect,scrollableAncestors:se,scrollableAncestorRects:We,windowRect:it}),Tt=Ye?xe(Ye,T):null,At=Fr(se),mn=Ht(At),xn=Ht(At,[M]),ve=xe(He,mn),be=pe?or(pe,He):null,Ne=V&&be?f({active:V,collisionRect:be,droppableRects:te,droppableContainers:Xe,pointerCoordinates:Tt}):null,Ot=Qn(Ne,"id"),[ae,Lt]=c.useState(null),wn=Mt?He:xe(He,xn),yn=nr(wn,(i=ae==null?void 0:ae.rect)!=null?i:null,M),st=c.useRef(null),kt=c.useCallback((j,$)=>{let{sensor:U,options:le}=$;if(G.current==null)return;const Y=x.get(G.current);if(!Y)return;const q=j.nativeEvent,_=new U({active:G.current,activeNode:Y,event:q,options:le,context:J,onAbort(k){if(!x.get(k))return;const{onDragAbort:Q}=ee.current,oe={id:k};Q==null||Q(oe),D({type:"onDragAbort",event:oe})},onPending(k,ce,Q,oe){if(!x.get(k))return;const{onDragPending:Ie}=ee.current,ue={id:k,constraint:ce,initialCoordinates:Q,offset:oe};Ie==null||Ie(ue),D({type:"onDragPending",event:ue})},onStart(k){const ce=G.current;if(ce==null)return;const Q=x.get(ce);if(!Q)return;const{onDragStart:oe}=ee.current,Me={activatorEvent:q,active:{id:ce,data:Q.data,rect:H}};Ae.unstable_batchedUpdates(()=>{oe==null||oe(Me),E(de.Initializing),w({type:A.DragStart,initialCoordinates:k,active:ce}),D({type:"onDragStart",event:Me}),Ue(st.current),qe(q)})},onMove(k){w({type:A.DragMove,coordinates:k})},onEnd:me(A.DragEnd),onCancel:me(A.DragCancel)});st.current=_;function me(k){return async function(){const{active:Q,collisions:oe,over:Me,scrollAdjustedTranslate:Ie}=J.current;let ue=null;if(Q&&Ie){const{cancelDrop:Te}=ee.current;ue={activatorEvent:q,active:Q,collisions:oe,delta:Ie,over:Me},k===A.DragEnd&&typeof Te=="function"&&await Promise.resolve(Te(ue))&&(k=A.DragCancel)}G.current=null,Ae.unstable_batchedUpdates(()=>{w({type:k}),E(de.Uninitialized),Lt(null),Ue(null),qe(null),st.current=null;const Te=k===A.DragEnd?"onDragEnd":"onDragCancel";if(ue){const at=ee.current[Te];at==null||at(ue),D({type:Te,event:ue})}})}}},[x]),Dn=c.useCallback((j,$)=>(U,le)=>{const Y=U.nativeEvent,q=x.get(le);if(G.current!==null||!q||Y.dndKit||Y.defaultPrevented)return;const _={active:q};j(U,$.options,_)===!0&&(Y.dndKit={capturedBy:$.sensor},G.current=le,kt(U,$))},[x,kt]),jt=Ir(d,Dn);zr(d),Z(()=>{M&&R===de.Initializing&&E(de.Initialized)},[M,R]),c.useEffect(()=>{const{onDragMove:j}=ee.current,{active:$,activatorEvent:U,collisions:le,over:Y}=J.current;if(!$||!U)return;const q={active:$,activatorEvent:U,collisions:le,delta:{x:ve.x,y:ve.y},over:Y};Ae.unstable_batchedUpdates(()=>{j==null||j(q),D({type:"onDragMove",event:q})})},[ve.x,ve.y]),c.useEffect(()=>{const{active:j,activatorEvent:$,collisions:U,droppableContainers:le,scrollAdjustedTranslate:Y}=J.current;if(!j||G.current==null||!$||!Y)return;const{onDragOver:q}=ee.current,_=le.get(Ot),me=_&&_.rect.current?{id:_.id,rect:_.rect.current,data:_.data,disabled:_.disabled}:null,k={active:j,activatorEvent:$,collisions:U,delta:{x:Y.x,y:Y.y},over:me};Ae.unstable_batchedUpdates(()=>{Lt(me),q==null||q(k),D({type:"onDragOver",event:k})})},[Ot]),Z(()=>{J.current={activatorEvent:B,active:V,activeNode:X,collisionRect:be,collisions:Ne,droppableRects:te,draggableNodes:x,draggingNode:ge,draggingNodeRect:pe,droppableContainers:O,over:ae,scrollableAncestors:se,scrollAdjustedTranslate:ve},H.current={initial:pe,translated:be}},[V,X,Ne,be,x,ge,pe,te,O,ae,se,ve]),Rr({...ie,delta:T,draggingRect:be,pointerCoordinates:Tt,scrollableAncestors:se,scrollableAncestorRects:We});const Cn=c.useMemo(()=>({active:V,activeNode:X,activeNodeRect:M,activatorEvent:B,collisions:Ne,containerNodeRect:Ee,dragOverlay:re,draggableNodes:x,droppableContainers:O,droppableRects:te,over:ae,measureDroppableContainers:fe,scrollableAncestors:se,scrollableAncestorRects:We,measuringConfiguration:F,measuringScheduled:Re,windowRect:it}),[V,X,M,B,Ne,Ee,re,x,O,te,ae,fe,se,We,F,Re,it]),Sn=c.useMemo(()=>({activatorEvent:B,activators:jt,active:V,activeNodeRect:M,ariaDescribedById:{draggable:Se},dispatch:w,draggableNodes:x,over:ae,measureDroppableContainers:fe}),[B,jt,V,M,w,Se,x,ae,fe]);return z.createElement(en.Provider,{value:m},z.createElement(ot.Provider,{value:Sn},z.createElement(fn.Provider,{value:Cn},z.createElement(hn.Provider,{value:yn},a)),z.createElement(Kr,{disabled:(l==null?void 0:l.restoreFocus)===!1})),z.createElement(Vn,{...l,hiddenTextDescribedById:Se}));function Rn(){const j=(Ce==null?void 0:Ce.autoScrollEnabled)===!1,$=typeof u=="object"?u.enabled===!1:u===!1,U=N&&!j&&!$;return typeof u=="object"?{...u,enabled:U}:{enabled:U}}}),Zr=c.createContext(null),Kt="button",eo="Draggable";function to(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=$e(eo),{activators:s,activatorEvent:l,active:u,activeNodeRect:a,ariaDescribedById:d,draggableNodes:f,over:g}=c.useContext(ot),{role:h=Kt,roleDescription:S="draggable",tabIndex:p=0}=o??{},b=(u==null?void 0:u.id)===t,w=c.useContext(b?hn:Zr),[D,m]=Qe(),[R,E]=Qe(),N=Pr(s,t),y=je(n);Z(()=>(f.set(t,{id:t,key:i,node:D,activatorNode:R,data:y}),()=>{const T=f.get(t);T&&T.key===i&&f.delete(t)}),[f,t]);const x=c.useMemo(()=>({role:h,tabIndex:p,"aria-disabled":r,"aria-pressed":b&&h===Kt?!0:void 0,"aria-roledescription":S,"aria-describedby":d.draggable}),[r,h,p,b,S,d.draggable]);return{active:u,activatorEvent:l,activeNodeRect:a,attributes:x,isDragging:b,listeners:r?void 0:N,node:D,over:g,setNodeRef:m,setActivatorNodeRef:E,transform:w}}function no(){return c.useContext(fn)}const ro="Droppable",oo={timeout:25};function io(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=$e(ro),{active:s,dispatch:l,over:u,measureDroppableContainers:a}=c.useContext(ot),d=c.useRef({disabled:n}),f=c.useRef(!1),g=c.useRef(null),h=c.useRef(null),{disabled:S,updateMeasurementsFor:p,timeout:b}={...oo,...o},w=je(p??r),D=c.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{a(Array.isArray(w.current)?w.current:[w.current]),h.current=null},b)},[b]),m=rt({callback:D,disabled:S||!s}),R=c.useCallback((x,T)=>{m&&(T&&(m.unobserve(T),f.current=!1),x&&m.observe(x))},[m]),[E,N]=Qe(R),y=je(t);return c.useEffect(()=>{!m||!E.current||(m.disconnect(),f.current=!1,m.observe(E.current))},[E,m]),c.useEffect(()=>(l({type:A.RegisterDroppable,element:{id:r,key:i,disabled:n,node:E,rect:g,data:y}}),()=>l({type:A.UnregisterDroppable,key:i,id:r})),[r]),c.useEffect(()=>{n!==d.current.disabled&&(l({type:A.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,l]),{active:s,rect:g,isOver:(u==null?void 0:u.id)===r,node:E,over:u,setNodeRef:N}}function Nt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function so(e,t){return e.reduce((n,r,o)=>{const i=t.get(r);return i&&(n[o]=i),n},Array(e.length))}function Ve(e){return e!==null&&e>=0}function ao(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function lo(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const gn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=Nt(t,r,n),s=t[o],l=i[o];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},Ke={scaleX:1,scaleY:1},co=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:i,overIndex:s}=e;const l=(t=i[n])!=null?t:r;if(!l)return null;if(o===n){const a=i[s];return a?{x:0,y:n<s?a.top+a.height-(l.top+l.height):a.top-l.top,...Ke}:null}const u=uo(i,o,n);return o>n&&o<=s?{x:0,y:-l.height-u,...Ke}:o<n&&o>=s?{x:0,y:l.height+u,...Ke}:{x:0,y:0,...Ke}};function uo(e,t,n){const r=e[t],o=e[t-1],i=e[t+1];return r?n<t?o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const pn="Sortable",vn=z.createContext({activeIndex:-1,containerId:pn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:gn,disabled:{draggable:!1,droppable:!1}});function fo(e){let{children:t,id:n,items:r,strategy:o=gn,disabled:i=!1}=e;const{active:s,dragOverlay:l,droppableRects:u,over:a,measureDroppableContainers:d}=no(),f=$e(pn,n),g=l.rect!==null,h=c.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),S=s!=null,p=s?h.indexOf(s.id):-1,b=a?h.indexOf(a.id):-1,w=c.useRef(h),D=!ao(h,w.current),m=b!==-1&&p===-1||D,R=lo(i);Z(()=>{D&&S&&d(h)},[D,h,S,d]),c.useEffect(()=>{w.current=h},[h]);const E=c.useMemo(()=>({activeIndex:p,containerId:f,disabled:R,disableTransforms:m,items:h,overIndex:b,useDragOverlay:g,sortedRects:so(h,u),strategy:o}),[p,f,R.draggable,R.droppable,m,h,b,u,g,o]);return z.createElement(vn.Provider,{value:E},t)}const ho=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Nt(n,r,o).indexOf(t)},go=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:s,previousItems:l,previousContainerId:u,transition:a}=e;return!a||!r||l!==i&&o===s?!1:n?!0:s!==o&&t===u},po={duration:200,easing:"ease"},bn="transform",vo=Fe.Transition.toString({property:bn,duration:0,easing:"linear"}),bo={roleDescription:"sortable"};function mo(e){let{disabled:t,index:n,node:r,rect:o}=e;const[i,s]=c.useState(null),l=c.useRef(n);return Z(()=>{if(!t&&n!==l.current&&r.current){const u=o.current;if(u){const a=De(r.current,{ignoreTransform:!0}),d={x:u.left-a.left,y:u.top-a.top,scaleX:u.width/a.width,scaleY:u.height/a.height};(d.x||d.y)&&s(d)}}n!==l.current&&(l.current=n)},[t,n,r,o]),c.useEffect(()=>{i&&s(null)},[i]),i}function xo(e){let{animateLayoutChanges:t=go,attributes:n,disabled:r,data:o,getNewIndex:i=ho,id:s,strategy:l,resizeObserverConfig:u,transition:a=po}=e;const{items:d,containerId:f,activeIndex:g,disabled:h,disableTransforms:S,sortedRects:p,overIndex:b,useDragOverlay:w,strategy:D}=c.useContext(vn),m=wo(r,h),R=d.indexOf(s),E=c.useMemo(()=>({sortable:{containerId:f,index:R,items:d},...o}),[f,o,R,d]),N=c.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:y,node:x,isOver:T,setNodeRef:O}=io({id:s,data:E,disabled:m.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...u}}),{active:I,activatorEvent:H,activeNodeRect:V,attributes:G,setNodeRef:Ce,listeners:Ue,isDragging:B,over:qe,setActivatorNodeRef:ee,transform:Se}=to({id:s,data:E,attributes:{...bo,...n},disabled:m.draggable}),Xe=kn(O,Ce),F=!!I,te=F&&!S&&Ve(g)&&Ve(b),fe=!w&&B,Re=fe&&te?Se:null,Ye=te?Re??(l??D)({rects:p,activeNodeRect:V,activeIndex:g,overIndex:b,index:R}):null,ie=Ve(g)&&Ve(b)?i({id:s,items:d,activeIndex:g,overIndex:b}):R,ne=I==null?void 0:I.id,M=c.useRef({activeId:ne,items:d,newIndex:ie,containerId:f}),Ee=d!==M.current.items,J=t({active:I,containerId:f,isDragging:B,isSorting:F,id:s,index:R,items:d,newIndex:M.current.newIndex,previousItems:M.current.items,previousContainerId:M.current.containerId,transition:a,wasDragging:M.current.activeId!=null}),he=mo({disabled:!J,index:R,node:x,rect:y});return c.useEffect(()=>{F&&M.current.newIndex!==ie&&(M.current.newIndex=ie),f!==M.current.containerId&&(M.current.containerId=f),d!==M.current.items&&(M.current.items=d)},[F,ie,f,d]),c.useEffect(()=>{if(ne===M.current.activeId)return;if(ne!=null&&M.current.activeId==null){M.current.activeId=ne;return}const ge=setTimeout(()=>{M.current.activeId=ne},50);return()=>clearTimeout(ge)},[ne]),{active:I,activeIndex:g,attributes:G,data:E,rect:y,index:R,newIndex:ie,items:d,isOver:T,isSorting:F,isDragging:B,listeners:Ue,node:x,overIndex:b,over:qe,setNodeRef:Xe,setActivatorNodeRef:ee,setDroppableNodeRef:O,setDraggableNodeRef:Ce,transform:he??Ye,transition:re()};function re(){if(he||Ee&&M.current.newIndex===R)return vo;if(!(fe&&!yt(H)||!a)&&(F||J))return Fe.Transition.toString({...a,property:bn})}}function wo(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}C.Down,C.Right,C.Up,C.Left;function yo({id:e,label:t}){const{attributes:n,listeners:r,setNodeRef:o,transform:i,transition:s}=xo({id:e}),l={transform:Fe.Transform.toString(i),transition:s,padding:"8px 12px",border:"1px solid #ccc",marginBottom:"8px",borderRadius:"4px",backgroundColor:"white",cursor:"grab",userSelect:"none"};return v.jsx("div",{ref:o,style:l,...n,...r,children:t})}function Do(){const e=bt(),t=_e(i=>i.form.fields),n=Kn(zt(Et),zt(St,{coordinateGetter:void 0}));function r(i){const{active:s,over:l}=i;if(s.id!==l.id){const u=t.findIndex(f=>f.id===s.id),a=t.findIndex(f=>f.id===l.id),d=Nt(t,u,a);e(Mn(d))}}function o(i){const s={id:crypto.randomUUID(),type:i,label:`${i} field`,placeholder:"",required:!1,options:i==="dropdown"?["Option 1","Option 2"]:[]};e(Gt(s))}return v.jsxs("div",{children:[v.jsx("div",{className:"mb-4 flex space-x-2",children:["text","textarea","dropdown","checkbox","date"].map(i=>v.jsxs("button",{onClick:()=>o(i),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:["Add ",i.charAt(0).toUpperCase()+i.slice(1)]},i))}),v.jsx(Qr,{sensors:n,collisionDetection:Zn,onDragEnd:r,children:v.jsx(fo,{items:t.map(i=>i.id),strategy:co,children:t.map(i=>v.jsx(yo,{id:i.id,label:i.label},i.id))})})]})}function Co(){const e=_e(a=>a.form.fields),[t,n]=c.useState({}),[r,o]=c.useState({}),i=(a,d)=>{const f={};if(a.required&&(!d||d.trim()==="")&&(f.required="This field is required"),a.validation.minLength&&d.length<a.validation.minLength&&(f.minLength=`Minimum length is ${a.validation.minLength}`),a.validation.maxLength&&d.length>a.validation.maxLength&&(f.maxLength=`Maximum length is ${a.validation.maxLength}`),a.validation.pattern)try{new RegExp(a.validation.pattern).test(d)||(f.pattern="Invalid format")}catch{}return Object.keys(f).length===0?null:f},s=(a,d)=>{n(h=>({...h,[a]:d}));const f=e.find(h=>h.id===a),g=i(f,d);o(h=>({...h,[a]:g}))},l=a=>{const d=t[a.id]||"",f=r[a.id],g={id:a.id,name:a.id,value:d,onChange:h=>s(a.id,h.target.value),placeholder:a.placeholder,required:a.required,className:"w-full border rounded px-2 py-1 "+(f?"border-red-500":"border-gray-300"),"aria-describedby":`${a.id}-help`};switch(a.type){case"text":return v.jsx("input",{type:"text",...g});case"textarea":return v.jsx("textarea",{...g,rows:4});case"dropdown":return v.jsxs("select",{...g,onChange:h=>s(a.id,h.target.value),children:[v.jsx("option",{value:"",children:"Select an option"}),a.options.map((h,S)=>v.jsx("option",{value:h,children:h},S))]});case"checkbox":return v.jsx("input",{type:"checkbox",id:a.id,name:a.id,checked:t[a.id]||!1,onChange:h=>s(a.id,h.target.checked)});case"date":return v.jsx("input",{type:"date",...g});default:return null}},u=a=>{a.preventDefault();let d=!0;const f={};e.forEach(g=>{const h=i(g,t[g.id]||"");h&&(d=!1,f[g.id]=h)}),o(f),d&&alert("Form submitted successfully!")};return v.jsxs("form",{onSubmit:u,noValidate:!0,children:[v.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Live Form Preview"}),e.length===0&&v.jsx("p",{className:"text-gray-500",children:"No fields added yet."}),e.map(a=>v.jsxs("div",{className:"mb-4",children:[v.jsxs("label",{htmlFor:a.id,className:"block font-medium mb-1",children:[a.label," ",a.required&&v.jsx("span",{className:"text-red-500",children:"*"})]}),l(a),a.helpText&&v.jsx("small",{id:`${a.id}-help`,className:"block text-gray-500",children:a.helpText}),r[a.id]&&Object.values(r[a.id]).map((d,f)=>v.jsx("p",{className:"text-red-500 text-sm mt-1",children:d},f))]},a.id)),e.length>0&&v.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Submit"})]})}function So({theme:e,onToggle:t}){return v.jsx("button",{onClick:t,className:"px-3 py-1 bg-gray-300 dark:bg-gray-700 rounded",children:e==="dark"?"Light Mode":"Dark Mode"})}const Ro={contactForm:[{id:"1",type:"text",label:"Name",required:!0,placeholder:"Enter your full name",helpText:"Your full name",options:[],validation:{minLength:2,maxLength:50,pattern:""}},{id:"2",type:"text",label:"Email",required:!0,placeholder:"Enter your email",helpText:"We'll never share your email.",options:[],validation:{minLength:5,maxLength:100,pattern:"^\\S+@\\S+\\.\\S+$"}},{id:"3",type:"textarea",label:"Message",required:!1,placeholder:"Your message here",helpText:"",options:[],validation:{minLength:0,maxLength:500,pattern:""}}],feedbackForm:[{id:"1",type:"dropdown",label:"Feedback Type",required:!0,placeholder:"",helpText:"",options:["Bug Report","Feature Request","Other"],validation:{minLength:0,maxLength:0,pattern:""}},{id:"2",type:"textarea",label:"Details",required:!0,placeholder:"Provide details here",helpText:"",options:[],validation:{minLength:10,maxLength:1e3,pattern:""}}]};function Eo(){const e=bt(),t=n=>{e(Jt(Ro[n]))};return v.jsxs("div",{className:"mt-6",children:[v.jsx("h3",{className:"font-semibold mb-2",children:"Load Template"}),v.jsx("button",{className:"mr-2 mb-2 px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700",onClick:()=>t("contactForm"),children:"Contact Form"}),v.jsx("button",{className:"mb-2 px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700",onClick:()=>t("feedbackForm"),children:"Feedback Form"})]})}function Ao(){const e=bt(),t=_e(s=>s.form.fields),n=_e(s=>s.form.theme);c.useEffect(()=>{const s=localStorage.getItem("formFields");s&&e(Jt(JSON.parse(s)))},[]),c.useEffect(()=>{localStorage.setItem("formFields",JSON.stringify(t))},[t]);const r=s=>{const l={type:s,label:s.charAt(0).toUpperCase()+s.slice(1),required:!1,placeholder:"",options:s==="dropdown"?["Option 1","Option 2"]:[],helpText:"",validation:{minLength:0,maxLength:100,pattern:""}};e(Gt(l))},o=()=>{e(Tn())},i=()=>{e(An())};return v.jsxs("div",{className:"p-4 max-w-7xl mx-auto",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-bold",children:"Form Builder"}),v.jsx(So,{theme:n,onToggle:()=>e(In())})]}),v.jsxs("div",{className:"flex space-x-8",children:[v.jsxs("div",{className:"w-1/3 border p-4 rounded shadow",children:[v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Add Fields"}),v.jsx("div",{className:"flex flex-col space-y-2",children:["text","textarea","dropdown","checkbox","date"].map(s=>v.jsxs("button",{className:"bg-blue-600 text-white py-2 rounded hover:bg-blue-700",onClick:()=>r(s),children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)]},s))}),v.jsx(Eo,{}),v.jsxs("div",{className:"mt-6 space-x-2",children:[v.jsx("button",{onClick:o,className:"bg-gray-300 px-3 py-1 rounded hover:bg-gray-400",children:"Undo"}),v.jsx("button",{onClick:i,className:"bg-gray-300 px-3 py-1 rounded hover:bg-gray-400",children:"Redo"})]})]}),v.jsx("div",{className:"w-1/3 border p-4 rounded shadow overflow-auto max-h-[80vh]",children:v.jsx(Do,{})}),v.jsx("div",{className:"w-1/3 border p-4 rounded shadow overflow-auto max-h-[80vh]",children:v.jsx(Co,{})})]})]})}export{Ao as default};
